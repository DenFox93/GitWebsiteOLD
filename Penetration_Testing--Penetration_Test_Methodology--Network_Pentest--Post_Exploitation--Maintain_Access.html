<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Maintain Access</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Maintain Access</h1><br/>Some customers will want to include the simulation of an Advanced Persistent Threat (APT):<br />   ◇ creating backdoors<br />   ◇ persistence methods<br />   ◇ data exfiltration<br /><br /><strong><h3>Maintain access</h3></strong><br />Our session with the machine must be:<br />• <strong>Stable (does not get dropped)</strong><br />   ◇ <a href="--Penetration_Test_Methodology--Network_Pentest--Exploitation--Metasploit--How_to_use_metasploit--Meterpreter--migrate_PID_of_the_payload.html">migrate Metasploit to another process</a><br />   <div class="codebox"><div class="codebox">meterpreter&nbsp;&gt;&nbsp;getpid&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0088ff;font-weight:400">#id&nbsp;process&nbsp;that&nbsp;we&nbsp;are&nbsp;attached</span><br />meterpreter&nbsp;&gt;&nbsp;<span style="color:#ff9d00;font-weight:700">ps</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0088ff;font-weight:400">#all&nbsp;id&nbsp;of&nbsp;the&nbsp;processes&nbsp;running&nbsp;on&nbsp;the&nbsp;machine</span><br />meterpreter&nbsp;&gt;&nbsp;run&nbsp;post<span style="color:#ff9d00;font-weight:700">/</span>windows<span style="color:#ff9d00;font-weight:700">/</span>manage<span style="color:#ff9d00;font-weight:700">/</span>migrate&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0088ff;font-weight:400">#migrate&nbsp;to&nbsp;another&nbsp;process&nbsp;from&nbsp;the&nbsp;current&nbsp;one</span><br />meterpreter&nbsp;&gt;&nbsp;getpid&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0088ff;font-weight:400">#NEW&nbsp;id&nbsp;process&nbsp;that&nbsp;we&nbsp;are&nbsp;attached</span></div></div><br />   the process on which it will migrate, will always be a process with the same privileges as the current session and that the process name is notepad.txt <br />• <strong>Privileged (can run with high privileges)</strong><br />• <strong>Persistent (through reboots)</strong><br /><br /><a href="file://C:/CherryTree/screenshots2/PTP-elearnsecurity/2. Network Security/6. Post Exploitation/maitainingAccess.png"><img src="images/856-1.png" alt="images/856-1.png" /></a><br /><br /></div>
</body>
</html>
